<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>gravity demo</title>
    <!--Makes a nice title on the tab-->
    <script src="p5/p5.min.js"></script>
    <script src="p5/p5.collide2d.min.js"></script>
    <script src="barrier.js"></script>
    <script src="jumper.js"></script>
    <script src="platform.js"></script>
    <!--references the page to the p5 library-->
    <style>
        body {
            overflow: hidden;
            /*keeps scroll bars from appearing*/
            padding: 0;
            /*ensures no gaps appearon page around edges*/
            margin: 0;
            /*ensures no gaps appearon page around edges*/
            background: linear-gradient(-45deg, #EE7752, #E73C7E, #23A6D5, #23D5AB);
            background-size: 400% 400%;
            -webkit-animation: Gradient 15s ease infinite;
            -moz-animation: Gradient 15s ease infinite;
            animation: Gradient 15s ease infinite;
        }

        @-webkit-keyframes Gradient {
            0% {
                background-position: 0% 50%
            }

            50% {
                background-position: 100% 50%
            }

            100% {
                background-position: 0% 50%
            }
        }

        @-moz-keyframes Gradient {
            0% {
                background-position: 0% 50%
            }

            50% {
                background-position: 100% 50%
            }

            100% {
                background-position: 0% 50%
            }
        }

        @keyframes Gradient {
            0% {
                background-position: 0% 50%
            }

            50% {
                background-position: 100% 50%
            }

            100% {
                background-position: 0% 50%
            }
        }


        h1 {
            display: inline;
            color: azure;
            position: inherit;
        }
    </style>
</head>

<body>
    <script>
        //we could refer to an external js file but i would like to keep it all on one simple file
        var userSpeed = 8; //sensitivity of movement for player
        var w = window.innerWidth; //defines window size
        var h = window.innerHeight; //defines window sized
        var ball = new ball(); //global object is created here
        var barrier = new barrier();
        var platform = new platform();
        var r; //Random color values (left blank for definition in the function)
        var g; //Random color values (left blank for definition in the function)
        var b; //Random color values (left blank for definition in the function)
        var img;
        var ts = 48;
        var hit = false;

        function preload() {
            img = loadImage('media/chicken.png');
        }

        function setup() { //runs once at startup
            createCanvas(w, h); //creates area as big as window
            //background(0); //makes a black background
            img.loadPixels();
            r = random(256); //random color selection
            g = random(256); //random color selection
            b = random(256); //random color selection
        }

        function draw() { //runs at 60Hz
            background(128); //makes a black background
            barrier.show();
            barrier.update();
            ball.update();
            ball.show(); //makes the ball appear by calling the function  in the object
            ball.move();
            platform.show();
            hit = collideRectCircle(barrier.x, barrier.y, barrier.width, barrier.height, ball.x, ball.y, 50);
            if (hit == true) {
                //noLoop();
                console.log("barrier hit detected!");
                barrier.dodgeCount = 0;
                
            }
            hit = collideRectCircle(platform.x, platform.y, platform.width, platform.height, ball.x, ball.y, 50);
            if (hit == true) {
                ball.velocity = -10;
                console.log("platform hit detected!");
                r = random(256); //random color selection
            g = random(256); //random color selection
            b = random(256); //random color selection
            platform.hit ++;
            }
            document.getElementById('coo').innerHTML = "barriers dodged: [" + barrier.dodgeCount + "]" + "bounces: [" + platform.hit + "]" ;
        }



        function keyPressed() {
            if (keyCode === 32) {
                ball.up();
            }
        }
    </script>
    <h1 id="coo"></h1>
    <!--<h1> </h1>
    <h1 id="demo"></h1>-->
    <!--made an element to display coordinates-->
    <h2 id="p5_loading">Loading... you really shouldnt be seeing this unless theres a problem with the graphics</h1>
</body>

</html>